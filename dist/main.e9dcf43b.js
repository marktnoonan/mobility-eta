parcelRequire=function(e,r,n){var t="function"==typeof parcelRequire&&parcelRequire,i="function"==typeof require&&require;function u(n,o){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!o&&f)return f(n,!0);if(t)return t(n,!0);if(i&&"string"==typeof n)return i(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}a.resolve=function(r){return e[n][1][r]||r};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,a,l,l.exports)}return r[n].exports;function a(e){return u(a.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=t;for(var o=0;o<n.length;o++)u(n[o]);return u}({9:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,a=!1,u=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done)&&(r.push(o.value),!e||r.length!==e);n=!0);}catch(t){a=!0,u=t}finally{try{!n&&i.return&&i.return()}finally{if(a)throw u}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports.default={today:function(t){if("test"===t.toLowerCase())return console.log("test user logged in"),"2018-04-10";var e=new Date;return e.getFullYear()+"-"+(e.getMonth.length<10?0:"")+(e.getMonth()+1)+"-"+e.getDate()},convertTimeToMinutes:function(e){var r=e.split(":"),n=t(r,2),a=n[0],u=n[1];return 60*parseInt(a)+parseInt(u)},getCurrentTime:function(){var t=new Date;return t.getHours()+":"+t.getMinutes()},convertFromMilitaryTime:function(e){var r=e.split(":"),n=t(r,2),a=n[0],u=n[1],o=a>12?a%12:a,i=a<12?"AM":"PM";return a<12&&"0"===o.charAt(0)&&(o=o.substring(1)),o+":"+u+" "+i},dateHelper:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],prettyDate:function(t){return this.days[t.getDay()]+", "+this.months[t.getMonth()]+" "+t.getDate()}}};
},{}],15:[function(require,module,exports) {
module.exports="/bus.a66949ff.png";
},{}],10:[function(require,module,exports) {
"use strict";var t=require("./helpers"),e=a(t),n=require("../assets/bus.png"),i=a(n);function a(t){return t&&t.__esModule?t:{default:t}}var o={yellow:"#d69400",green:"#8AB755",red:"#FC7455",blue:"#00BBE5",orange:"#F79044"},r={},s=[],d="",l=[],p="";function u(t,n){document.querySelector("#intro-text").innerHTML='<h3 txt="c"> Your Next Trip </h3>',p=e.default.today(t),M(),l=[t,n],m(t,n)}function c(){document.querySelector("#mobility-eta").innerHTML='<div class="form-wrapper" style="text-align:center; margin-top: 20px; margin-bottom: 40px;"><form class="" id="unpw-form" method="post"> <h1 style="margin-bottom: 40px;"> Log In </h1> <p style="color:'+o.red+'">Username or Password was not found, please try again:</p><input type="text" name="providedUsername" value="" placeholder="Client ID" style="font-size:18px; padding: 3px"> <br><br> <input type="password" name="providedPassword" id="pw" value="" placeholder="Password" style="font-size:18px; padding: 3px"> <br><br><br> </form> <button type="button" id="login" style="background-color: #333; border: 2px solid #333; color: #fff; display: inline-block; font-size: 14px; font-weight: 700; line-height: 1.2; padding: 11px 20px; position: relative; cursor: pointer;">Check My Trips</button><div id="output"><br><span style="color:'+o.red+'">WARNING: This is site is in a pilot mode. Some errors may still exist. If trip information is unclear or looks wrong, you may confirm with MARTA Mobility ETA by phone: 404-848-4212.</span><br><br> If you do not know your Client ID or Password, you can call Reservations at (404) 848-5826.<br><br> For a demo, enter username <b>test</b> and password <b>test</b>. Contact markthomasnoonan@gmail.com with questions or feedback. </div></div> </div>'}function y(){var t=document.querySelector("input[name=providedUsername]"),e=document.querySelector("input[name=providedPassword]");document.querySelector("#login").addEventListener("click",function(){u(t.value,e.value)}),document.querySelector("#pw").addEventListener("keyup",function(n){13==n.keyCode&&u(t.value,e.value)})}function b(){document.querySelector("#refresh-button").addEventListener("click",function(){u(l[0],l[1])})}function m(t,e){return new Promise(function(n,i){var a=new XMLHttpRequest;a.open("POST","https://markthomasnoonan.com/mobility-eta/scrape.php",!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.onload=function(){4==a.readyState&&200===a.status?n(g(a.responseText)):i(Error("Request failed, status was "+a.statusText))},a.send("providedUsername="+t+"&providedPassword="+e)})}function g(t){var n=JSON.parse(t),i=JSON.parse(n).find(function(t){return t.date===p}).data.trips[0].trips[0],a=i.pickup.location,o=i.dropoff.location,r={bookingID:i.id,readyTime:i.pickup.negotiatedTimeEarly.substring(0,5),endWindow:i.pickup.negotiatedTimeLate.substring(0,5),eta:i.pickup.estimatedTime.substring(0,5),status:"",etaInMinutes:"",endWindowInMinutes:"",currentTimeInMinutes:e.default.convertTimeToMinutes(e.default.getCurrentTime()),displayEta:"",displayReadyTime:"",displayEndWindow:"",displayDate:e.default.dateHelper.prettyDate(new Date),pickupAddress:a.streetNumber+" "+a.onStreet+"<br> "+a.city+", "+a.state+" "+a.postalCode,dropOffAddress:o.streetNumber+" "+o.onStreet+"<br> "+o.city+", "+o.state+" "+o.postalCode};r.etaInMinutes=e.default.convertTimeToMinutes(r.eta),r.endWindowInMinutes=e.default.convertTimeToMinutes(r.endWindow),r.displayEta=e.default.convertFromMilitaryTime(r.eta),r.displayReadyTime=e.default.convertFromMilitaryTime(r.readyTime),r.displayEndWindow=e.default.convertFromMilitaryTime(r.endWindow),r.delayInMinutes=30-(r.endWindowInMinutes-r.etaInMinutes),r.statusColor=v(r.delayInMinutes),r.statusDescription=w(r.delayInMinutes),r.delayInMinutesDescription=h(r.delayInMinutes),document.querySelector("#mobility-eta").innerHTML=k(r),T(r)}function f(){c(),y()}y();var x=["unscheduled","scheduled","inprogress","complete","noshow","cancelled","willcall","imminent"];function v(t){return console.log(t),t>30?"red":t<30&&t>0?"yellow":"green"}function w(t){return console.log(t),t>30?"Running late.":t<30&&t>0?"Arriving in window.":"Arriving on time."}function h(t){return t>1?t+" minutes after Ready Time.":1==t?"1 minute after Ready Time.":t<-1?Math.abs(t)+" minutes before Ready Time.":-1==t?"1 minute before Ready Time.":0==t?"right on time.":void 0}function k(t){return'\n    <card full class="booking" id="booking0">\n\t\t\t<div class="date-and-id" id="date-and-id">\n\t\t\t\t<span class="display-date">\n          <h2 style="border:0; margin-bottom: 4px; margin-top: 12px">\n            <b>'+t.displayDate+"</b>\n          </h2>\n        </span>\n\t\t\t\t<span>\n          <b>Booking ID</b>: "+t.bookingID+"</span> |\n\t\t\t\t<span>\n          <b>Ready Time</b>: "+t.displayReadyTime+'</span>\n\t\t\t</div>\n\t\t\t<div class="booking-status" style="margin-top: 8px; margin-bottom: 7px;">\n\t\t\t\t<span style="font-weight:bold; font-size: 16px;">Trip Status</span>\n\t\t\t\t<br>\n\t\t\t\t<span class="late-status" style="border-radius: 3px; padding: 4px; color:'+o[t.statusColor]+'">'+t.statusDescription+'</span>\n\t\t\t</div>\n\t\t\t<div class="progress-wrapper" style="display: inline-block; font-size: 12px;">\n\t\t\t\t<div class="labels" style="padding-top: 3px; text-align: left; line-height: 1.2; margin-left: -6px;">\n\t\t\t\t\t<div class="label left" style="width: auto;text-align: left;display: inline-block;padding: 0;">\n\t\t\t\t\t\t<span class="tool-tip" style="border-radius: 3px;display: inline-block;padding: 3px;margin-bottom: -2px;">\n              <b>Start Window</b>\n              <br>'+t.displayReadyTime+'</span>\n\t\t\t\t\t\t<div class="down-arrow" style=" position: relative; height: 10px; width: 10px;  transform: translate(6px, -3px) rotate(45deg); "></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="label center" style="width: auto;text-align: left;display: inline-block;transform: translateX(45px);padding: 0">\n\t\t\t\t\t\t<span class="tool-tip" style="border-radius: 3px;display: inline-block;padding: 3px;margin-bottom: -2px;">\n              <b>End Window</b>\n              <br>'+t.displayEndWindow+'</span>\n\t\t\t\t\t\t<div class="down-arrow" style=" position: relative; height: 10px; width: 10px; transform: translate(6px, -3px) rotate(45deg); "></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="outer" style="text-align: left; width: 240px; background-color: #111; border-radius: 10px; overflow: hidden;">\n\t\t\t\t\t<div class="inner" style="height: 26px; background-color: #595; background: linear-gradient(to right, #595 0%, #ee5 50%, #f55 80%);">\n\t\t\t\t\t\t<span class="eta label" style="position: relative;display: inline-block;box-sizing: border-box;height: 100%;padding-top: 5px;text-align: left;transform: translateY(-5px);" aria-hidden="true">\n              <img src="'+i.default+'" id="martabus" style="height: 26px;padding: 0px 5px 0px 0px; border-left: 108px solid rgba(100, 100, 100, 0.5); border-right: 104px solid rgba(100, 100, 100, 0.5);"\n                alt="">\n            </span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="eta-tooltip" style="width: auto; text-align: left; position: absolute; margin-top: 4px; margin-left: 100px;">\n\t\t\t\t\t<div class="up-arrow" style=" position: relative; height: 10px; width: 10px; transform: translate(4px, 0px) rotate(45deg); "></div>\n\t\t\t\t\t<span class="tool-tip" style="border-radius: 3px;display: inline-block;padding: 3px;transform: translateY(-6px); line-height:1.2">\n            <b>Your ETA</b>\n            <br>'+t.displayEta+'</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<span class="eta-wrapper" style="margin-top: 44px; display: inline-block; font-size: 14px; line-height: 1.3">Bus expected at\n        <b>'+t.displayEta+"</b>,\n        <br>"+t.delayInMinutesDescription+'</span>\n\t\t\t<div class="ready-time-gage" style="text-align: left">\n\t\t\t<br>\n\t\t\t\t<div class="pickup">\n\t\t\t\t\t<b>Pick Up</b>\n\t\t\t\t\t<br>'+t.pickupAddress+'\n\t\t\t\t</div>\n\t\t\t\t<div class="dropoff">\n\t\t\t\t\t<b>Drop Off</b>\n          <br>'+t.dropOffAddress+"\n          </div>\n\t\t\t\t<br>\n\t\t\t</div>\n\t\t</card>\n    "}function T(t){var e=document.querySelector("#martabus"),n=document.querySelector(".eta-tooltip"),i=document.querySelector(".progress-wrapper"),a=4*t.delayInMinutes,o=a,r=0,s=0;o<234?(o+="px",s=240-a-28+"px"):o="220px",r=a<-16?"-16px":a>215?"216px":a-8+"px",e.style.borderLeft=o+" solid rgba(100,100,100,0.5)",e.style.borderRight=s+" solid rgba(100,100,100,0.5)",n.style.marginLeft=r,i.style.display="inline-block"}function M(){document.querySelector("#mobility-eta").innerHTML='<style>@-webkit-keyframes sweep { to { -webkit-transform: rotate(360deg); } }</style><div id="spinner" style="width: 50px; height: 50px; -webkit-animation: sweep 1s infinite linear; border-radius: 75px; border-bottom: 5px solid #00bbe5; margin: 50px auto"></div><div style="margin: 20px auto; display: inline-block">Loading your trips...</div>'}
},{"./helpers":9,"../assets/bus.png":15}]},{},[10])
//# sourceMappingURL=/main.fd07668e.map